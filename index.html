<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">

    <!-- FontAwesome CSS -->
    <script src="https://kit.fontawesome.com/d16b2c473e.js" crossorigin="anonymous"></script>

    <title>Medievil</title>
    <style>
        canvas {
            height: 250px;
            width: 500px;
        }

        body {
            font-family: "ＭＳ Ｐゴシック";
            text-rendering: geometricPrecision;
        }

        body::before {
            content: "";
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: url('assets/images/sword_pattern.jpg');
            background-repeat: repeat;
            background-position: 0 0;
            background-size: auto 100%;
            filter: grayscale(100%) brightness(.25);
            animation: bg-movement 480s linear infinite;
        }

        @keyframes bg-movement {
            from {
                background-position: 0 0;
            }
            /*use negative width if you want it to flow right to left else and positive for left to right*/
            to {
                background-position: 10000px 10000px;
            }
        }

        .bg-gray {
            background-color: #111111;
        }

        .border-gray {
            border-color: #4b4b4b;
        }

        img {
            image-rendering: pixelated;
        }

        .unknowm {
            filter: brightness(0%);
        }

        .flip-x {
            transform: rotateY(180deg);
        }
        
    </style>
  </head>
  <body class="h-screen v-screen">
    
    <div class="flex justify-center items-center h-full relative flex-col" id="app">
        <div v-if="!in_match">
            <div class="p-4 bg-gray text-white shadow-lg border-2 border-gray-500 mb-2 flex justify-between align-center flex-row">
                <h5 class="text-xl font-bold">Welcome, Amon!</h5>
                <span class="font-bold text-xl">
                    <i class="fas fa-coins mr-2"></i>
                    100
                </span>
            </div>
            <h5 class="font-bold text-xl text-white">Your Units</h5>
            <div class="flex flex-row mb-2">
                <div class="flex justify-center items-center text-white bg-gray border-2 border-gray-500 flex-col p-4 w-32">
                    <img src="assets/sprites/archer_0.png" class="h-16 mb-2">
                    <h5 class="text-xl font-bold">Archer</h5>
                </div>
                <div class="flex justify-center items-center text-white bg-gray border-2 border-gray-500 flex-col p-4 w-32">
                    <img src="assets/sprites/warrior_0.png" class="h-16 mb-2">
                    <h5 class="text-xl font-bold">Warrior</h5>
                </div>
                <div class="flex justify-center items-center text-white bg-gray border-2 border-gray-500 flex-col p-4 w-32">
                    <img src="assets/sprites/lancer.png" class="h-16 mb-2">
                    <h5 class="text-xl font-bold">Lancer</h5>
                </div>
                <div class="flex justify-center items-center text-white bg-gray border-2 border-gray-500 flex-col p-4 w-32">
                    <img src="assets/sprites/knight.png" class="h-16 mb-2">
                    <h5 class="text-xl font-bold">Knight</h5>
                </div>
            </div>
            <h5 class="font-bold text-xl text-white">Shop</h5>
            <div class="flex flex-row mb-6">
                <div class="flex justify-center items-center text-white bg-gray border-2 border-gray-500 flex-col p-4 w-32">
                    <img src="assets/sprites/archer_0.png" class="h-16 mb-2 unknowm">
                    <h5 class="text-xl font-bold">?????</h5>
                    <b>
                        <i class="fas fa-coins mr-2"></i>
                        100
                    </b>
                </div>
                <div class="flex justify-center items-center text-white bg-gray border-2 border-gray-500 flex-col p-4 w-32">
                    <img src="assets/sprites/archer_0.png" class="h-16 mb-2 unknowm">
                    <h5 class="text-xl font-bold">?????</h5>
                    <b>
                        <i class="fas fa-coins mr-2"></i>
                        100
                    </b>
                </div>
                <div class="flex justify-center items-center text-white bg-gray border-2 border-gray-500 flex-col p-4 w-32">
                    <img src="assets/sprites/archer_0.png" class="h-16 mb-2 unknowm">
                    <h5 class="text-xl font-bold">?????</h5>
                    <b>
                        <i class="fas fa-coins mr-2"></i>
                        100
                    </b>
                </div>
                <div class="flex justify-center items-center text-white bg-gray border-2 border-gray-500 flex-col p-4 w-32">
                    <img src="assets/sprites/archer_0.png" class="h-16 mb-2 unknowm">
                    <h5 class="text-xl font-bold">?????</h5>
                    <b>
                        <i class="fas fa-coins mr-2"></i>
                        100
                    </b>
                </div>
            </div>
            <button class="bg-gray border-gray-500 text-center p-4 text-white border-2 text-xl font-bold hover:bg-gray-800 transition cursor-pointer" @click="in_match=true">
                <i class="fas fa-user-friends mr-2"></i> Find Match
            </button>
            <button class="bg-gray border-gray-500 text-center p-4 text-white border-2 text-xl font-bold hover:bg-gray-800 transition cursor-pointer">
                <i class="fas fa-sign-out-alt"></i> Sign Out
            </button>
        </div>
        <div v-else>
            <div class="p-4 bg-gray text-white shadow-lg border-2 border-gray-500 mb-2 flex flex-col justify-center items-center">
                <h5 class="flex justify-between text-xl font-bold mb-2 w-full">
                    <div class="flex justify-between align-items-stretch flex-row" v-if="match[oponent_match_id]">
                        <i :class="(match[oponent_match_id].life > 0 ? 'fas' : 'far') + ' fa-heart text-purple-500 mr-2 text-xl'"></i>
                        <i :class="(match[oponent_match_id].life > 1 ? 'fas' : 'far') + ' fa-heart text-purple-500 mr-2 text-xl'"></i>
                        <i :class="(match[oponent_match_id].life > 2 ? 'fas' : 'far') + ' fa-heart text-purple-500 mr-2 text-xl'"></i>
                    </div>
                    <span>Nicolas</span>
                </h5>
                <canvas id="canvas" class="bg-green-500 _border-4 border-green-700 mb-4 flip-x" ref="canvas_oponent"></canvas>
                <h5 class="flex justify-between text-xl font-bold mb-2 w-full">
                    <span>Amon</span>
                    <div class="flex justify-between align-items-stretch flex-row" v-if="match[player_match_id]">
                        <i :class="(match[player_match_id].life > 0 ? 'fas' : 'far') + ' fa-heart text-red-500 mr-2 text-xl'"></i>
                        <i :class="(match[player_match_id].life > 1 ? 'fas' : 'far') + ' fa-heart text-red-500 mr-2 text-xl'"></i>
                        <i :class="(match[player_match_id].life > 2 ? 'fas' : 'far') + ' fa-heart text-red-500 mr-2 text-xl'"></i>
                    </div>
                </h5>
                <canvas id="canvas" class="bg-green-500 _border-4 border-green-700 mb-1" ref="canvas_player"></canvas>
            </div>
            <div class="bg-green-500 w-50 text-white border-2 border-gray border-b-0 text-xl text-center px-6 py-4" v-if="match[player_match_id]">
                <i class="fas fa-coins mr-2"></i> {{ match[player_match_id].money.toFixed(2) }}
            </div>
            <div class="flex justify-around items-stretch flex-row w-full border-gray-500" v-if="match[player_match_id]">
                <button
                @click="buyRandomUnit()"
                class="flex justify-center items-center flex-col flex-1 text-white bg-gray border-r-2 border-l-2 border-gray-500 border-r-0 font-medium hover:bg-gray-800 transition px-6 py-4">
                    <img src="assets/sprites/enemy.png" class="h-9 mb-2 unknowm">
                    <h5 class="font-bold">Random</h5>
                    <p>Unit</p>
                    <b>
                        <i class="fas fa-coins mr-2"></i>
                        {{ match[player_match_id].unit_price.toFixed(2) }}
                    </b>
                </button>
                <button
                @click="upgradeUnitType(1)"
                v-for="(type, type_name) in match[player_match_id].types"
                class="flex justify-center items-center flex-col bg-gray text-white  border-r-2 border-gray-500 border-r-0 font-medium hover:bg-gray-800 transition px-6 py-4">
                    <img :src="`assets/sprites/${type_name}_0.png`" class="h-9 mb-2">
                    <h5 class="font-bold">{{type_name}}</h5>
                    <p>Level Up</p>
                    <b>
                        <i class="fas fa-coins mr-2"></i>
                        100
                    </b>
                </button>
            </div>
            <div class="bg-red-500 w-50 text-white border-2  border-t-0 text-xl text-center px-6 py-4 hover:bg-red-700 cursor-pointer" @click="in_match=false">
                <i class="fa fa-sign-out-alt mr-2"></i> Sair
            </div>
        </div>
    </div>

    <!-- VueJS -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12"></script>
    <!-- PixiJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.1.3/pixi.min.js"></script>
    <!-- PixiJS Instances -->
    <script src="components/enemy.js"></script>
    <script src="components/tower.js"></script>
    <script src="components/game.js"></script>
    <!-- app.js -->
    <script src="components/app.js"></script>
  </body>
</html>